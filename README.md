# CloudPaste - åœ¨çº¿å‰ªè´´æ¿ ğŸ“‹

![Cloudflare Workers](https://img.shields.io/badge/Cloudflare-Workers-orange?style=flat-square&logo=cloudflare)
![Vue.js](https://img.shields.io/badge/Vue.js-3.x-green?style=flat-square&logo=vue.js)
![License](https://img.shields.io/badge/License-MIT-blue?style=flat-square)

ä¸€ä¸ªåŸºäº Cloudflare Workers çš„åœ¨çº¿å‰ªè´´æ¿å’Œæ–‡ä»¶åˆ†äº«æœåŠ¡ã€‚æ”¯æŒ Markdownã€å¯†ç ä¿æŠ¤ã€æ–‡ä»¶ä¸Šä¼ ç­‰åŠŸèƒ½ã€‚


<table>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/8c2b0ac0-75ca-430d-a9fb-c2b94e00bf3c" width="400"/></td>
    <td><img src="https://github.com/user-attachments/assets/313e54c5-d686-4cff-8985-e18c6d92dda1" width="400"/></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/50fc8f8d-4fcb-4b20-9487-ad9998a4ede7" width="400"/></td>
    <td><img src="https://github.com/user-attachments/assets/c14ef420-651f-4803-810f-7daee80483cc" width="400"/></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/50460f21-12bb-43cc-9ea3-f6a7b455c314" width="400"/></td>
    <td><img src="https://github.com/user-attachments/assets/abcf4219-ebde-4630-8666-f7de1834a28d" width="400"/></td>
  </tr>
</table>


## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### ğŸ“ æ–‡æœ¬åˆ†äº«
- æ”¯æŒæ™®é€šæ–‡æœ¬å’Œ Markdown æ ¼å¼
- Markdown å®æ—¶é¢„è§ˆå’ŒåŒæ­¥æ»šåŠ¨
- å®Œæ•´çš„ Markdown æ ·å¼æ”¯æŒ
  - ä¼˜åŒ–çš„åˆ—è¡¨åµŒå¥—æ˜¾ç¤º
  - ç¾åŒ–çš„è¡¨æ ¼æ ·å¼
  - ä»£ç å—å®æ—¶è¯­æ³•é«˜äº®
  - æ ‡å‡†çš„ä»»åŠ¡åˆ—è¡¨æ ·å¼
  - ä¼˜åŒ–çš„å¼•ç”¨å—æ ·å¼
  - æ”¯æŒæ•°å­¦å…¬å¼æ¸²æŸ“ (KaTeX)
- ç¼–è¾‘å™¨æ”¯æŒåŒå‘æ‹‰ä¼¸è°ƒæ•´å¤§å°
- æ”¯æŒå¯†ç ä¿æŠ¤
- è‡ªå®šä¹‰è¿‡æœŸæ—¶é—´
- è‡ªå®šä¹‰åˆ†äº«é“¾æ¥åç¼€
- åŒæ­¥æ»šåŠ¨é¢„è§ˆ

### ğŸ“ æ–‡ä»¶åˆ†äº«
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ 
- å¤šæ–‡ä»¶ä¸Šä¼ 
- æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆ25MBï¼Œè‡ªå®šä¹‰ä¸è¶…R2é™åˆ¶å°±è¡Œï¼‰
- å¯†ç ä¿æŠ¤
- è‡ªå®šä¹‰è¿‡æœŸæ—¶é—´
- å®æ—¶ä¸Šä¼ è¿›åº¦æ˜¾ç¤º


### ğŸ‘¨â€ğŸ’» ç®¡ç†åŠŸèƒ½
- ç®¡ç†å‘˜ç™»å½•
- æŸ¥çœ‹æ‰€æœ‰åˆ†äº«é“¾æ¥
- å¯ç®¡ç†æ–‡æœ¬/æ–‡ä»¶ä¸Šä¼ ï¼ˆé˜²æ­¢è¢«ç›—åˆ·é¢åº¦ï¼‰
- åˆ†ç±»è¿‡æ»¤ï¼ˆæ–‡æœ¬/æ–‡ä»¶ï¼‰
- åˆ é™¤åˆ†äº«ï¼ˆå¸¦ç¡®è®¤æç¤ºï¼‰
- å¤åˆ¶åˆ†äº«é“¾æ¥
- æŸ¥çœ‹åˆ†äº«ç»Ÿè®¡
- ç›‘æ§å­˜å‚¨ç©ºé—´ä½¿ç”¨æƒ…å†µ
  - å·²ç”¨ç©ºé—´
  - æ€»å®¹é‡
  - ä½¿ç”¨ç‡ç™¾åˆ†æ¯”
  - å­˜å‚¨ç©ºé—´é¢„è­¦æç¤º
- ä¿®æ”¹åˆ†äº«å¯†ç ï¼ˆæ”¯æŒæ–‡æœ¬å’Œæ–‡ä»¶åˆ†äº«ï¼‰
- ç¼–è¾‘æ–‡æœ¬åˆ†äº«å†…å®¹
  - æ”¯æŒå®æ—¶ Markdown é¢„è§ˆ
  - å¯åˆ‡æ¢ Markdown å¼€å…³
  - ä¸ä¸»é¡µç¼–è¾‘å™¨ç›¸åŒçš„ç¼–è¾‘ä½“éªŒ
  - åˆ†å±é¢„è§ˆæ¨¡å¼

### ğŸ” è®¿é—®æ§åˆ¶
- å¯†ç ä¿æŠ¤
  - æ”¯æŒæ–‡æœ¬å’Œæ–‡ä»¶åˆ†äº«è®¾ç½®å¯†ç 
  - ç®¡ç†å‘˜å¯éšæ—¶ä¿®æ”¹æˆ–ç§»é™¤å¯†ç 
  - å¯†ç åŠ å¯†å­˜å‚¨
- æ–‡æœ¬å†…å®¹æ§åˆ¶
  - ä»…ç®¡ç†å‘˜å¯ç¼–è¾‘å·²åˆ†äº«çš„æ–‡æœ¬å†…å®¹
  - æ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹
- ä¸Šä¼ æ§åˆ¶
  - ç®¡ç†å‘˜å¯å¼€å¯/å…³é—­æ–‡æœ¬ä¸Šä¼ åŠŸèƒ½
  - ç®¡ç†å‘˜å¯å¼€å¯/å…³é—­æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
  - é˜²æ­¢æ¶æ„ä¸Šä¼ å ç”¨èµ„æº

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- å¯†ç åŠ å¯†å­˜å‚¨
- è‡ªåŠ¨è¿‡æœŸæ¸…ç† ï¼ˆæ¯å½“æœ‰è¯·æ±‚è®¿é—®æ—¶ï¼Œæ£€æŸ¥å½“å‰æ—¶é—´ï¼Œå¦‚æœæ˜¯æ•´ç‚¹ï¼ˆåˆ†é’Ÿä¸º0ï¼‰ï¼Œè§¦å‘æ¸…ç†æ“ä½œï¼‰
- è®¿é—®æƒé™æ§åˆ¶
- CORS å®‰å…¨é…ç½®

### ğŸ¨ ç•Œé¢ä¼˜åŒ–
- å…¨åˆ†è¾¨ç‡è‡ªé€‚åº”å¸ƒå±€
  - è¶…å¤§å±å¹•ä¼˜åŒ– (>1400px)
  - å¤§å±å¹•é€‚é… (1200px-1399px)
  - ä¸­ç­‰å±å¹•é€‚é… (992px-1199px)
  - å°å±å¹•é€‚é… (768px-991px)
  - å¹³æ¿é€‚é… (576px-767px)
  - æ‰‹æœºæ¨ªå±é€‚é… (481px-575px)
  - æ‰‹æœºç«–å±é€‚é… (<480px)
- å“åº”å¼ç¼–è¾‘å™¨å¸ƒå±€
- ä¼˜åŒ–çš„ç§»åŠ¨ç«¯é€‚é…
- ç¾åŒ–çš„æ»šåŠ¨æ¡æ ·å¼
- å¹³æ»‘çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ
- ä¼˜åŒ–çš„ä»£ç å—æ˜¾ç¤º
- å®Œæ•´çš„ä¸­æ–‡æ ‡ç‚¹ç¬¦å·å¯¹é½
- åˆ—è¡¨é¡¹å®Œç¾å¯¹é½

## ğŸš€ éƒ¨ç½²æ­¥éª¤ï¼ˆè‡ªåŠ¨ï¼‰

### 1. ä¿®æ”¹ç¯å¢ƒå˜é‡(å¯é€‰)

1. **Fork æœ¬ä»“åº“**
   - ç‚¹å‡»å³ä¸Šè§’çš„ Fork æŒ‰é’®
   - ç­‰å¾…ä»“åº“å…‹éš†å®Œæˆ

2 **è®¾ç½® GitHub Secrets**
   
   åœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œè½¬åˆ° Settings -> Secrets and variables -> Actionsï¼Œæ·»åŠ ä»¥ä¸‹ secretsï¼š

   - `CF_API_TOKEN`: Cloudflare API ä»¤ç‰Œ
     * è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/profile/api-tokens)
     * åˆ›å»ºæ–°çš„ API ä»¤ç‰Œ -é€‰æ‹©"ç¼–è¾‘ Cloudflare Workers"
   
   - `CF_ACCOUNT_ID`: Cloudflare è´¦æˆ· ID
     * åœ¨ Cloudflare ä»ªè¡¨æ¿å³ä¾§å¯ä»¥æ‰¾åˆ°
   
   - `ADMIN_USERNAME`: ç®¡ç†å‘˜ç”¨æˆ·å
     * è®¾ç½®ä½ çš„ç®¡ç†å‘˜è´¦å·
   
   - `ADMIN_PASSWORD`: ç®¡ç†å‘˜å¯†ç 
     * è®¾ç½®ä½ çš„ç®¡ç†å‘˜å¯†ç 

### 2. ä¸€é”®éƒ¨ç½²

[![Deploy to Cloudflare Workers](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/ling-drag0n/CloudPaste)

## ğŸš€ éƒ¨ç½²æ­¥éª¤ï¼ˆæ‰‹åŠ¨ï¼‰

### 1. å‡†å¤‡å·¥ä½œ
1. æ³¨å†Œ [Cloudflare](https://dash.cloudflare.com) è´¦å·
2. è¿›å…¥ Cloudflare æ§åˆ¶å°

### 2. åˆ›å»ºå­˜å‚¨èµ„æº
1. åˆ›å»º KV å‘½åç©ºé—´
   - åç§°ï¼š`PASTE_STORE`
   - ç”¨äºå­˜å‚¨æ–‡æœ¬å†…å®¹

2. åˆ›å»º R2 å­˜å‚¨æ¡¶
   - åç§°ï¼š`cloudpaste-files`
   - ç”¨äºå­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶

### 3. åˆ›å»º Worker
1. åˆ›å»ºæ–°çš„ Worker
2. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   ```env
   ADMIN_USERNAME=ä½ çš„ç®¡ç†å‘˜ç”¨æˆ·å
   ADMIN_PASSWORD=ä½ çš„ç®¡ç†å‘˜å¯†ç 
   ```

3. ç»‘å®šå­˜å‚¨ï¼š
   - KV ç»‘å®šï¼š
     ```toml
     å˜é‡åï¼šPASTE_STORE
     é€‰æ‹©åˆ›å»ºçš„ KV å‘½åç©ºé—´
     ```
   - R2 ç»‘å®šï¼š
     ```toml
     å˜é‡åï¼šFILE_STORE
     é€‰æ‹©åˆ›å»ºçš„ R2 å­˜å‚¨æ¡¶
     ```

### 4. éƒ¨ç½²ä»£ç 
1. å¤åˆ¶ `worker.js` çš„å®Œæ•´ä»£ç 
2. ç²˜è´´åˆ° Worker çš„ç¼–è¾‘å™¨ä¸­
3. ä¿å­˜å¹¶éƒ¨ç½²

## ğŸ”§ ä»£ç ç»“æ„è¯´æ˜

### ä¸»è¦ç»„ä»¶
1. `worker.js`
   - ä¸»è¦çš„ Worker ä»£ç 
   - åŒ…å«è·¯ç”±å¤„ç†å’Œ API å®ç°

2. å·¥å…·å‡½æ•°
   - `generateId`: ç”ŸæˆéšæœºID
   - `hashPassword`: å¯†ç åŠ å¯†
   - `verifyPassword`: å¯†ç éªŒè¯
   - `calculateExpiryTime`: è®¡ç®—è¿‡æœŸæ—¶é—´
   - `isExpired`: æ£€æŸ¥æ˜¯å¦è¿‡æœŸ

3. å‰ç«¯ç»„ä»¶
   - Vue 3 åº”ç”¨
   - Markdown æ¸²æŸ“
   - ä»£ç é«˜äº®
   - æ–‡ä»¶ä¸Šä¼ ç•Œé¢

### ğŸ“¡ API ç«¯ç‚¹
1. æ–‡æœ¬ç›¸å…³
   ```http
   POST /api/paste     # åˆ›å»ºæ–‡æœ¬åˆ†äº«
   GET  /api/paste/:id # è·å–æ–‡æœ¬å†…å®¹
   ```

2. æ–‡ä»¶ç›¸å…³
   ```http
   POST /api/file      # ä¸Šä¼ æ–‡ä»¶
   GET  /api/file/:id  # è·å–æ–‡ä»¶ä¿¡æ¯
   GET  /api/file/:id?download=true # ä¸‹è½½æ–‡ä»¶
   ```

3. ç®¡ç†ç›¸å…³
   ```http
   POST   /api/admin/login                    # ç®¡ç†å‘˜ç™»å½•
   GET    /api/admin/shares                   # è·å–åˆ†äº«åˆ—è¡¨
   GET    /api/admin/storage                  # è·å–å­˜å‚¨ç©ºé—´ä½¿ç”¨æƒ…å†µ
   DELETE /api/admin/paste/:id                # åˆ é™¤æ–‡æœ¬åˆ†äº«
   DELETE /api/admin/file/:id                 # åˆ é™¤æ–‡ä»¶åˆ†äº«
   PUT    /api/admin/paste/:id/content        # æ›´æ–°æ–‡æœ¬å†…å®¹
   PUT    /api/admin/paste/:id/password       # ä¿®æ”¹æ–‡æœ¬åˆ†äº«å¯†ç 
   PUT    /api/admin/file/:id/password        # ä¿®æ”¹æ–‡ä»¶åˆ†äº«å¯†ç 
   ```

## ğŸ”„ è‡ªåŠ¨åŒ–åŠŸèƒ½

### è¿‡æœŸå†…å®¹æ¸…ç†
- è‡ªåŠ¨æ£€æµ‹è¿‡æœŸå†…å®¹
- å®šæ—¶æ¸…ç†è¿‡æœŸæ–‡ä»¶å’Œæ–‡æœ¬
- é‡Šæ”¾å­˜å‚¨ç©ºé—´
- æ¯æ•´ç‚¹è‡ªåŠ¨è§¦å‘æ¸…ç†

## âš ï¸ ä½¿ç”¨é™åˆ¶
- æ–‡ä»¶å¤§å°ä¸Šé™ï¼š25MB
- æ”¯æŒçš„è¿‡æœŸæ—¶é—´ï¼š1å°æ—¶ã€1å¤©ã€7å¤©ã€30å¤©ï¼Œæ°¸ä¸è¿‡æœŸ
- å¹¶å‘è¯·æ±‚å— Worker é™åˆ¶

## ğŸ“ æ³¨æ„äº‹é¡¹
1. ç¡®ä¿æ­£ç¡®é…ç½®ç¯å¢ƒå˜é‡
2. å®šæœŸæ£€æŸ¥å­˜å‚¨ä½¿ç”¨é‡
   - é€šè¿‡ç®¡ç†é¢æ¿ç›‘æ§å­˜å‚¨ç©ºé—´
   - æ³¨æ„å­˜å‚¨ç©ºé—´ä½¿ç”¨ç‡é¢„è­¦
   - åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„å†…å®¹
3. ç›‘æ§é”™è¯¯æ—¥å¿—
4. æ³¨æ„ Worker ä½¿ç”¨é…é¢

## ğŸ› ï¸ ä½¿ç”¨
- Cloudflare Workers
- Cloudflare KV
- Cloudflare R2
- Vue 3
- Marked (Markdown æ¸²æŸ“)
- Highlight.js (ä»£ç é«˜äº®)

## ğŸ“± æµè§ˆå™¨æ”¯æŒ
- Chrome (æ¨è)
- Firefox
- Safari
- Edge
- ç§»åŠ¨ç«¯æµè§ˆå™¨

## ğŸ“„ è®¸å¯è¯
MIT License

## ğŸ”— ç›¸å…³é“¾æ¥
- [Cloudflare Workers æ–‡æ¡£](https://developers.cloudflare.com/workers/)
- [Vue 3 æ–‡æ¡£](https://v3.vuejs.org/)
- [Marked æ–‡æ¡£](https://marked.js.org/)
